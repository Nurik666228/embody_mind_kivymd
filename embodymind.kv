#: import NoTransition kivy.uix.screenmanager.NoTransition

<WindowManager>:
    MainMenu:
    SettingsMenu:
    MainMenu:
    GamesMenu:
    Game1Menu:

<MainMenu>:
    name: "MainMenu"
    LabelUnderline:

    MDRectangleFlatButton:
        id: play_button
        text: root.play_btn
        pos_hint: {'center_x': 0.5, 'center_y': 0.6}
        size_hint: (0.5, 0.09)
        line_width: 1.5
        font_style: "Button"
        on_press: app.play_click_sound()
        on_release:
            root.manager.transition = NoTransition()
            root.manager.current = "GamesMenu"

    MDRectangleFlatButton:
        id: settings_button
        text: root.settings_btn
        pos_hint: {'center_x': 0.5, 'center_y': 0.45}
        size_hint: (0.5, 0.09)
        line_width: 1.5
        font_style: "Button"
        on_press: app.play_click_sound()
        on_release:
            root.manager.transition = NoTransition()
            root.manager.current = "SettingsMenu"


    MDRectangleFlatButton:
        id: quit_button
        text: root.quit_btn
        pos_hint: {'center_x': 0.5, 'center_y': 0.3}
        size_hint: (0.5, 0.09)
        line_width: 1.5
        font_style: "Button"
        on_press: app.play_click_sound()
        on_release:
            root.show_quit_dialog()


<SettingsMenu>:
    name: "SettingsMenu"
    # полоска под лейблом "язык"
    canvas:
        Color:
            rgba: 0, 0, 0, 1
        Line:
            width: 1.5
            points: (0 + self.width / 4, self.height - self.height * 45 / 100, self.width - self.width / 4, self.height - self.height * 45 / 100)

    # верхняя менюшка
    MDTopAppBar:
        id: settings_top_bar
        pos_hint: {"right": 1, "top": 1}
        title: root.title
        anchor_title: "left"
        md_bg_color: "#616161"
        left_action_items: [["arrow-left", lambda x: root.return_to_main_menu()]]

    #MDSwitch:
        #id: music_switch
        #pos_hint: {'center_x': .75, 'center_y': 0.786}
        #active: True

    #MDSwitch:
        #id: sounds_switch
        #pos_hint: {'center_x': .75, 'center_y': 0.686}
        #active: True

    AnchorLayout:
        id: music_switch
        pos_hint: {'center_x': .75, 'center_y': 0.786}
        BigTouchSwitch:
            active: self.music_state
            on_active: root.check_music_state()

    AnchorLayout:
        id: sounds_switch
        pos_hint: {'center_x': .75, 'center_y': 0.686}
        BigTouchSwitch:
            active: self.sound_state
            on_active: root.check_sounds_state()

    MDRectangleFlatButton:
        id: english_btn
        text: "Қазақша"
        pos_hint: {'center_x': 0.5, 'center_y': 0.45}
        size_hint: (0.4, 0.05)
        line_width: 1.3
        font_style: "Button"
        on_press: app.play_click_sound()
        on_release: root.change_language("kaz")

    MDRectangleFlatButton:
        id: russian_btn
        text: "Русский"
        pos_hint: {'center_x': 0.5, 'center_y': 0.35}
        size_hint: (0.4, 0.05)
        line_width: 1.3
        font_style: "Button"
        on_press: app.play_click_sound()
        on_release: root.change_language("ru")

    MDRectangleFlatButton:
        id: kazakh_btn
        text: "English"
        pos_hint: {'center_x': 0.5, 'center_y': 0.25}
        size_hint: (0.4, 0.05)
        line_width: 1.3
        font_style: "Button"
        on_press: app.play_click_sound()
        on_release: root.change_language("en")


# кастомная кнопка выключатель/включатель
<BigTouchSwitch>:
    #increases the area that responds to touch
    size_hint: None, None
    size: switch.size[0] + dp(45), switch.size[1] + dp(0)
    MDSwitch:
        id: switch
        active: root.active


<GamesMenu>:
    name: "GamesMenu"

    # верхняя менюшка
    MDTopAppBar:
        id: games_top_bar
        pos_hint: {"right": 1, "top": 1}
        title: "Games"
        anchor_title: "left"
        md_bg_color: "#616161"
        left_action_items: [["arrow-left", lambda x: root.return_to_main_menu()]]

    MDCard:
        size_hint: (0.45, 0.2)
        pos_hint: {"center_x": .25, "center_y": .75}
        ripple_behavior: True
        on_release:
            root.manager.transition = NoTransition()
            root.manager.current = "Game1Menu"

    MDCard:
        size_hint: (0.45, 0.2)
        pos_hint: {"center_x": .75, "center_y": .75}
        ripple_behavior: True
        on_release:print("worked")

    MDCard:
        size_hint: (0.45, 0.2)
        pos_hint: {"center_x": .25, "center_y": .50}
        ripple_behavior: True
        on_release:print("worked")

    MDCard:
        size_hint: (0.45, 0.2)
        pos_hint: {"center_x": .75, "center_y": .50}
        ripple_behavior: True
        on_release:print("worked")

    MDCard:
        size_hint: (0.45, 0.2)
        pos_hint: {"center_x": .25, "center_y": .25}
        ripple_behavior: True
        on_release:print("worked")

    MDCard:
        size_hint: (0.45, 0.2)
        max_width: 50
        pos_hint: {"center_x": .75, "center_y": .25}
        ripple_behavior: True
        on_release:print("worked")
        MDLabel:
            text: "Pedoras"

<Game1Menu>:
    name: "Game1Menu"
    FloatLayout:
        MenuBackground:
        # верхняя менюшка
        MDTopAppBar:
            id: games_top_bar
            pos_hint: {"right": 1, "top": 1}
            title: "Games"
            anchor_title: "left"
            md_bg_color: "#616161"
            left_action_items: [["arrow-left", lambda x: root.return_to_games_menu()]]

<LabelUnderline@FloatLayout>:
    canvas:
        Color:
            rgba: 0, 0, 0, 1
        Line:
            width: 1.5
            points: (0 + self.width / 4, self.height - self.height * 20 / 100, self.width - self.width / 4, self.height - self.height * 20 / 100)


# класс отвечающий за задний фон всех меню
# временно не используется
<MenuBackground@FloatLayout>:
     # создание заднего фона
    canvas.before:
        Color:
            # цвет ниже это rgb(255, 229, 180)
            rgba: (255/255, 229/255, 180/255, 1)
        Rectangle:
            # self here refers to the widget i.e FloatLayout
            pos: self.pos
            size: self.size